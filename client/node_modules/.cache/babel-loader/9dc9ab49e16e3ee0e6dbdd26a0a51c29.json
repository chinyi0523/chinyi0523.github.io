{"ast":null,"code":"import _defineProperty from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./Login.css';import FacebookLogin from'react-facebook-login';import ReactDOM from'react-dom';// import Footer from \"../component/Footer\";\nimport{Link,Redirect}from'react-router-dom';import axios from\"axios\";import{NavBar}from'../component/AppBar';import Footer from'../component/Footer/Footer';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this,props));_this.handleFBSubmit=function(response){if(response.status==\"unknown\"){return;}axios.post(\"/api/loginFB\",{facebookID:response.userID}).then(function(res){console.log(res.data);if(res.data){if(res.data.message===true){alert('Logged in! Welcome：'+res.data.username);_this.setState({Login_facebook_ID:response.userID,isFBLogin:true,isLogin:true});}else{alert('User not registered!');_this.setState({Login_facebook_ID:response.userID,isLogin:false,isFBLogin:true});}}}).catch(function(err){console.log(err);});};_this.state={Login_username_input:'',Login_password_input:'',Login_facebook_ID:'',isLogin:false,isFBLogin:false};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleInputChange\",value:function handleInputChange(event){var target=event.target;var value=target.value;var name=target.id;this.setState(_defineProperty({},name,value));}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();console.log(this.state);if(false){alert(\"一些判斷式\");}else{var r=window.confirm(\"確認登入?\");if(r){//window.location = \"/Home_in\";\naxios.post(\"/api/login\",{account:this.state.Login_username_input,password:this.state.Login_password_input}).then(function(res){console.log(res.data);if(res.data){if(res.data.message===true){alert('登入成功，歡迎：'+res.data.data.username);//window.location = \"/\";\n_this2.setState({isLogin:true});}else{alert(\"錯誤：\\n\"+res.data.description);}}});}}}},{key:\"render\",value:function render(){console.log(this.state);if(this.state.isLogin){return React.createElement(Redirect,{to:\"/in\"});}else if(this.state.isFBLogin){return React.createElement(Redirect,{to:{pathname:\"/Register/pages/Register_facebook\",id:this.state.Login_facebook_ID}});}return React.createElement(\"div\",null,React.createElement(\"div\",{id:\"Login_container\"},React.createElement(NavBar,null),React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{id:\"Login_input\"},React.createElement(\"div\",{id:\"Login_username\"},React.createElement(\"p\",{id:\"Login_username_tag\"},\"Username:\"),React.createElement(\"input\",{id:\"Login_username_input\",className:\"Login_input\",placeholder:\"username\",autoFocus:true,value:this.state.value,onChange:this.handleInputChange})),React.createElement(\"div\",{id:\"Login_password1\"},React.createElement(\"p\",{id:\"Login_password_tag\"},\"Password:\"),React.createElement(\"input\",{id:\"Login_password_input\",className:\"Login_input\",placeholder:\"password\",type:\"password\",value:this.state.value,onChange:this.handleInputChange})),React.createElement(\"div\",{id:\"Login_links\"},React.createElement(Link,{id:\"Login_create\",to:\"/Register\"},\"Create a new account\"),React.createElement(Link,{id:\"Login_forgot\",to:\"/Forget\"},\"Forgot your password?\"))),React.createElement(\"input\",{id:\"Login_submit\",type:\"submit\",value:\"LOGIN\"}),React.createElement(\"div\",{id:\"Login_hr\"},\"\\xA0\\xA0\\xA0or login with...\")),React.createElement(FacebookLogin,{appId:\"176796437077702\",autoLoad:false,fields:\"name,email,picture\",callback:this.handleFBSubmit,cssClass:\"btnFacebook\",icon:\"fa-facebook\",textButton:\"\\xA0\\xA0Sign In with Facebook\"})),React.createElement(Footer,null));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/src/out/Login.js"],"names":["React","Component","FacebookLogin","ReactDOM","Link","Redirect","axios","NavBar","Footer","Login","props","handleFBSubmit","response","status","post","facebookID","userID","then","res","console","log","data","message","alert","username","setState","Login_facebook_ID","isFBLogin","isLogin","catch","err","state","Login_username_input","Login_password_input","handleInputChange","bind","handleSubmit","event","target","value","name","id","preventDefault","r","window","confirm","account","password","description","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Login.css';\nimport FacebookLogin from 'react-facebook-login';\nimport ReactDOM from 'react-dom';\n// import Footer from \"../component/Footer\";\nimport { Link,Redirect } from 'react-router-dom';\nimport axios from \"axios\";\nimport { NavBar } from '../component/AppBar';\nimport Footer from '../component/Footer/Footer'\nclass Login extends Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t  Login_username_input: '',\n\t\t  Login_password_input: '',\n\t\t  Login_facebook_ID: '',\n\t\t  isLogin: false,\n\t\t  isFBLogin: false\n\t\t};\n\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\t\n\thandleInputChange(event) {\n\t\tconst target = event.target;\n\t\tconst value = target.value;\n\t\tconst name = target.id;\n\t\t\n\t\tthis.setState({\n\t\t  [name]: value\n\t\t});\n\t}\n\t\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tconsole.log(this.state);\n\t\tif(false){\n\t\t\talert(\"一些判斷式\");\n\t\t}else{\n\t\t\tvar r=window.confirm(\"確認登入?\");\n\t\t\tif(r){\n\t\t\t\t//window.location = \"/Home_in\";\n\t\t\t\t\n\t\t\t\taxios.post(\"/api/login\", \n\t\t\t\t\t{account:this.state.Login_username_input,\n\t\t\t\t\tpassword:this.state.Login_password_input}\n\t\t\t\t).then(res => {\n\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t\t\tif(res.data){\n\t\t\t\t\t\t\tif(res.data.message===true){\n\t\t\t\t\t\t\t\talert('登入成功，歡迎：'+res.data.data.username);\n\t\t\t\t\t\t\t\t//window.location = \"/\";\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tisLogin:true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\talert(\"錯誤：\\n\"+res.data.description);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\thandleFBSubmit = (response) => {\n\t\tif (response.status == \"unknown\") {\n\t\t\treturn\n\t\t}\n\t\taxios.post(\"/api/loginFB\", {facebookID: response.userID}).then(res => {\n\t\t\tconsole.log(res.data);\n\t\t\tif(res.data){\n\t\t\t\tif(res.data.message===true){\n\t\t\t\t\talert('Logged in! Welcome：'+res.data.username);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tLogin_facebook_ID:response.userID,\n\t\t\t\t\t\tisFBLogin : true,\n\t\t\t\t\t\tisLogin   : true\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\talert('User not registered!');\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tLogin_facebook_ID:response.userID,\n\t\t\t\t\t\tisLogin   : false,\n\t\t\t\t\t\tisFBLogin : true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}).catch(err => {\n\t\t\tconsole.log(err)\n\t\t})\n\t}\n\t\n    render(){\n\t\tconsole.log (this.state)\n\t\tif(this.state.isLogin){\n\t\t\treturn <Redirect to=\"/in\" />\n\t\t} \n\t\telse if (this.state.isFBLogin) {\n\t\t\treturn <Redirect to={{pathname:\"/Register/pages/Register_facebook\", id:this.state.Login_facebook_ID}} />\n\t\t}\n\t\t\n        return (\n\t\t\t<div>\n            <div id=\"Login_container\">\n\t\t\t<NavBar/> \n\t\t\t<form onSubmit={this.handleSubmit}>\n                <div id=\"Login_input\">\n                        <div id=\"Login_username\">\n                            <p id=\"Login_username_tag\">Username:</p>\n                            <input id=\"Login_username_input\" className=\"Login_input\" placeholder=\"username\" autoFocus\n\t\t\t\t\t\t\t\tvalue={this.state.value} onChange={this.handleInputChange}\n\t\t\t\t\t\t\t></input>\n                        </div>\n                        <div id=\"Login_password1\">\n                            <p id=\"Login_password_tag\">Password:</p>\n                            <input id=\"Login_password_input\" className=\"Login_input\" placeholder=\"password\" type=\"password\"\n\t\t\t\t\t\t\t\tvalue={this.state.value} onChange={this.handleInputChange}\n\t\t\t\t\t\t\t></input>\n                        </div>\n\t\t\t\t\t<div id=\"Login_links\">\n\t\t\t\t\t\t<Link id = \"Login_create\" to=\"/Register\">Create a new account</Link>\n\t\t\t\t\t\t<Link id = \"Login_forgot\" to=\"/Forget\">Forgot your password?</Link>\n\t\t\t\t\t</div>\n                </div>\n\t\t\t\t\n                <input id=\"Login_submit\" type=\"submit\" value=\"LOGIN\"/>\n\t\t\t\t<div id=\"Login_hr\">&nbsp;&nbsp;&nbsp;or login with...</div>\n            </form>\n\t\t\t\n\t\t\t<FacebookLogin\n\t\t\t\tappId=\"176796437077702\"\n\t\t\t\tautoLoad={false}\n\t\t\t\tfields=\"name,email,picture\"\n\t\t\t\tcallback={this.handleFBSubmit}\n\t\t\t\tcssClass=\"btnFacebook\"\n\t\t\t\ticon=\"fa-facebook\"\n\t\t\t\ttextButton = \"&nbsp;&nbsp;Sign In with Facebook\" \n\t\t\t/>\n            </div>\n\t\t\t<Footer/>\n\t\t\t</div>\n        )\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}