{"ast":null,"code":"import _defineProperty from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import{NavBar}from'../../component/AppBar';import{withRouter}from'react-router-dom';var Register_facebook=/*#__PURE__*/function(_Component){_inherits(Register_facebook,_Component);function Register_facebook(props){var _this;_classCallCheck(this,Register_facebook);_this=_possibleConstructorReturn(this,_getPrototypeOf(Register_facebook).call(this,props));_this.state={Register_acc_realname:'',Register_acc_student_id:'',Register_facebook_id:props.location.id,imagePreviewUrl:'',file:null};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleImageChange=_this.handleImageChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Register_facebook,[{key:\"handleInputChange\",value:function handleInputChange(event){var target=event.target;var value=target.value;var name=target.id;this.setState(_defineProperty({},name,value));}},{key:\"handleSubmit\",value:function handleSubmit(event){event.preventDefault();var r=window.confirm(\"Are you sure to register via Facebook account?\");if(r){var data=new FormData();data.append('file',this.state.file);data.append('username',this.state.Register_acc_realname);data.append('account',this.state.Register_acc_student_id);data.append('facebookID',this.state.Register_facebook_id);var config={headers:{'content-type':'multipart/form-data'}};axios.post(\"/api/registerFB\",data,config).then(function(res){console.log(res.data);if(res){if(res.data.message===true){alert('Successfully registered!');window.location=\"/Login\";}else{alert('Error：\\n'+res.data.description);}}}).catch(function(err){console.log(\"err=\",err);});}}},{key:\"handleImageChange\",value:function handleImageChange(e){var _this2=this;//e.preventDefault();\nvar reader=new FileReader();var file=e.target.files[0];console.log('t',e.target);this.setState({file:file});reader.onloadend=function(){console.log('onloadend');_this2.setState({imagePreviewUrl:reader.result});};reader.readAsDataURL(file);console.log(this.state.file);}},{key:\"render\",value:function render(){var imagePreviewUrl=this.state.imagePreviewUrl;var $imagePreview=null;if(imagePreviewUrl){$imagePreview=React.createElement(\"img\",{src:imagePreviewUrl,id:\"Register_id_photo\"});}else{$imagePreview=React.createElement(\"div\",{className:\"previewText\"},\"Please select an Image for Preview\");}return React.createElement(\"div\",null,React.createElement(NavBar,null),React.createElement(\"div\",{id:\"Register_acc_container\"},React.createElement(\"div\",{id:\"Register_acc_register_table\"},React.createElement(\"h1\",{id:\"Register_acc_table_title\"},\"Just A Few Steps to Join EE+ With Facebook!\"),React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{id:\"Register_acc_table\"},React.createElement(\"div\",{id:\"Register_acc_input1\"},React.createElement(\"p\",{id:\"Register_acc_realname_label\"},\"Your Name\"),React.createElement(\"input\",{id:\"Register_acc_realname\",placeholder:\"Your Chinese Name\",value:this.state.value,onChange:this.handleInputChange})),React.createElement(\"div\",{id:\"Register_acc_input2\"},React.createElement(\"p\",{id:\"Register_acc_ID_label\"},\"Student ID\"),React.createElement(\"input\",{id:\"Register_acc_student_id\",placeholder:\"Student ID\",value:this.state.value,onChange:this.handleInputChange})),React.createElement(\"div\",{id:\"Register_acc_input6\"},React.createElement(\"p\",{id:\"Register_acc_image_label\"},\"Upload Image\"),React.createElement(\"label\",null,React.createElement(\"input\",{className:\"fileInput\",id:\"Register_fileinput\",type:\"file\",onChange:this.handleImageChange,name:\"file\"}),React.createElement(\"span\",{id:\"Register_acc_addImage_icon\"},\"\\u2795 \",React.createElement(\"p\",{style:{display:\"inline\",fontSize:\"18px\"}},\"Add Your ID Photo\"))))),React.createElement(\"button\",{id:\"Register_acc_register_button\",onclick:this.handleSubmit},React.createElement(\"p\",{id:\"Register_acc_register_text\"},\"Register\")))),React.createElement(\"div\",{id:\"Register_acc_FAQ\"},React.createElement(\"div\",{id:\"Register_acc_FAQ_title\"},\"FAQ\"),React.createElement(\"div\",{id:\"Register_acc_splitline\"}),React.createElement(\"div\",{id:\"Register_acc_FAQ_content\"},React.createElement(\"ul\",{id:\"Register_acc_FAQ_list\"},React.createElement(\"li\",null,\"ID photo should contain your \",React.createElement(\"em\",null,\"full name\"),\" and \",React.createElement(\"em\",null,\"intact, clear face\"),\".\"),React.createElement(\"li\",null,\"The size of photo is at most 1MB.\"),React.createElement(\"li\",null,\"...\"))),React.createElement(\"div\",{id:\"Register_acc_FAQ_title\"},\"Image Preview\"),React.createElement(\"div\",{id:\"Register_acc_splitline\"}),React.createElement(\"div\",{className:\"imgPreview\",id:\"Register_imgPreview\"},$imagePreview))));}}]);return Register_facebook;}(Component);export default withRouter(Register_facebook);","map":{"version":3,"sources":["/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/src/out/register_in/Register_facebook.js"],"names":["React","Component","axios","NavBar","withRouter","Register_facebook","props","state","Register_acc_realname","Register_acc_student_id","Register_facebook_id","location","id","imagePreviewUrl","file","handleInputChange","bind","handleSubmit","handleImageChange","event","target","value","name","setState","preventDefault","r","window","confirm","data","FormData","append","config","headers","post","then","res","console","log","message","alert","description","catch","err","e","reader","FileReader","files","onloadend","result","readAsDataURL","$imagePreview","display","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { NavBar } from '../../component/AppBar';\nimport {withRouter} from 'react-router-dom'\n\nclass Register_facebook extends Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tRegister_acc_realname: '',\n\t\t\tRegister_acc_student_id: '',\n\t\t  \tRegister_facebook_id: props.location.id,\n\t\t  \timagePreviewUrl: '',\n\t\t  \tfile: null\n\t\t};\n\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleImageChange = this.handleImageChange.bind(this);\n\t}\n\n\thandleInputChange(event) {\n\t\tconst target = event.target;\n\t\tconst value = target.value;\n\t\tconst name = target.id;\n\t\t\n\t\tthis.setState({\n\t\t  [name]: value\n\t\t});\n\t}\n\t\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\n\t\tvar r=window.confirm(\"Are you sure to register via Facebook account?\");\n\t\tif(r){\n\t\t\tvar data = new FormData();\n\t\t\tdata.append('file',this.state.file)\n\t\t\tdata.append('username',this.state.Register_acc_realname)\n\t\t\tdata.append('account',this.state.Register_acc_student_id)\n\t\t\tdata.append('facebookID', this.state.Register_facebook_id)\n\n\t\t\tconst config = {\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'multipart/form-data'\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\taxios.post(\"/api/registerFB\",\n\t\t\t\tdata, config\n\t\t\t).then(res => {\n\t\t\t\tconsole.log(res.data);\n\t\t\t\t\tif(res){\n\t\t\t\t\t\tif(res.data.message===true){\n\t\t\t\t\t\t\talert('Successfully registered!');\n\t\t\t\t\t\t\twindow.location = \"/Login\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\talert('Error：\\n'+res.data.description);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(\"err=\",err);\n\t\t\t})\n\t\t}\n\t}\n\t\n\thandleImageChange(e) {\n\t\t//e.preventDefault();\n\n\t\tlet reader = new FileReader();\n\t\tlet file = e.target.files[0];\n\t\tconsole.log('t',e.target)\n\t\tthis.setState({\n\t\t\tfile:file\n\t\t})\n\t\treader.onloadend = () => {\n\t\t\tconsole.log('onloadend');\n\t\t  this.setState({\n\t\t\timagePreviewUrl: reader.result\n\t\t  });\n\t\t}\n\n\t\treader.readAsDataURL(file)\n\t\tconsole.log(this.state.file)\n\t}\n\t\n    render(){\n\t\tlet {imagePreviewUrl} = this.state;\n\t\tlet $imagePreview = null;\n\t\tif (imagePreviewUrl) {\n\t\t  $imagePreview = (<img src={imagePreviewUrl} id=\"Register_id_photo\"/>);\n\t\t} else {\n\t\t  $imagePreview = (<div className=\"previewText\">Please select an Image for Preview</div>);\n\t\t}\n        return(\n\t\t\t<div>\n\t\t\t\t<NavBar/> \n            <div id=\"Register_acc_container\">\n                <div id=\"Register_acc_register_table\">\n                    <h1 id=\"Register_acc_table_title\">Just A Few Steps to Join EE+ With Facebook!</h1>\n\t\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<div id=\"Register_acc_table\">\n\t\t\t\t\t\t\t<div id=\"Register_acc_input1\">\n\t\t\t\t\t\t\t\t<p id=\"Register_acc_realname_label\">Your Name</p>\n\t\t\t\t\t\t\t\t<input id=\"Register_acc_realname\" placeholder=\"Your Chinese Name\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.value} onChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"Register_acc_input2\">\n\t\t\t\t\t\t\t\t<p id=\"Register_acc_ID_label\">Student ID</p>\n\t\t\t\t\t\t\t\t<input id=\"Register_acc_student_id\" placeholder=\"Student ID\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.value} onChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"Register_acc_input6\">\n\t\t\t\t\t\t\t\t<p id=\"Register_acc_image_label\">Upload Image</p>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input className=\"fileInput\" id=\"Register_fileinput\" \n\t\t\t\t\t\t\t\t\t\ttype=\"file\" \n\t\t\t\t\t\t\t\t\t\tonChange={this.handleImageChange} \n\t\t\t\t\t\t\t\t\t\tname=\"file\"/>\n\t\t\t\t\t\t\t\t<span id=\"Register_acc_addImage_icon\">➕ <p style={{display:\"inline\",fontSize:\"18px\"}}>Add Your ID Photo</p></span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<button id=\"Register_acc_register_button\" onclick={this.handleSubmit}>\n\t\t\t\t\t\t\t<p id=\"Register_acc_register_text\">Register</p>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t</form>\n                </div>\n\t\t\t\t\n                <div id=\"Register_acc_FAQ\">\n                    <div id=\"Register_acc_FAQ_title\">FAQ</div>\n                    <div id=\"Register_acc_splitline\"></div>\n                    <div id=\"Register_acc_FAQ_content\">\n                        <ul id=\"Register_acc_FAQ_list\">\n                            <li>ID photo should contain your <em>full name</em> and <em>intact, clear face</em>.</li>\n                            <li>The size of photo is at most 1MB.</li>\n                            <li>...</li>\n                        </ul>\n                    </div>\n\t\t\t\t\t<div id=\"Register_acc_FAQ_title\">Image Preview</div>\n\t\t\t\t\t<div id=\"Register_acc_splitline\"></div>\n\t\t\t\t<div className=\"imgPreview\" id=\"Register_imgPreview\">\n\t\t\t\t  \t\t\t{$imagePreview}\n\t\t\t\t\t</div>\n                </div>\n            </div>\n\t\t\t</div>\n        )\n    }\n}\nexport default withRouter(Register_facebook)"]},"metadata":{},"sourceType":"module"}