{"ast":null,"code":"import _classCallCheck from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _objectWithoutProperties from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{Component}from'react';import{Route,Redirect}from'react-router-dom';import{Home_page,Login_page,Support_page,About_page,Contact_page,Register_page,Forget_page,Team_page,History_page}from'./out/pages';import{Home_in_page,Column_page,Recruit_study_page,Main_in_page}from'./in/pages_in';//import PrivateRoute from './component/PrivateRoute';\nimport register_app from'./out/register_in/register_app';import Login from'./out/Login';import{isLoginChecker}from'./in/isLogin';import Footer from'./component/Footer/Footer';// import NavBar from './component/AppBar'\nimport'./App.css';import{get}from'mongoose';import equal from'fast-deep-equal';//import {fakeAuth} from './auth';\n/*class PrivateRoute extends Component {\n    constructor (props) {\n      super(props)\n  \n      this.state = {\n        isLogin: false // 是否通過權限檢核\n      }\n  \n    }\n    /*checkAuth = async() => {\n          \n      //console.log(\"isLogin: \"+this.state.isLogin)\n      if(!this.state.isLogin){\n        //setTimeout(alert(\"please wait\"),1000)\n        let isLogin = isLoginChecker()\n        this.setState({\n          isLogin:isLogin\n        })\n        \n      }\n    }\n    componentWillMount(){\n     this.checkAuth()\n    }//\n    UNSAFE_componentWillReceiveProps(){\n      this.setState({\n        isLogin:this.props.loginstatus\n      })\n    }\n\t\n\tcomponentDidUpdate(prevProps) {\n\t  if(!equal(this.props.loginstatus, prevProps.loginstatus))\n\t  {\n\t\tconst propL = this.props.loginstatus;\n\t\tconsole.log('login state change',propL);\n\t\tthis.setState((propL)=>({\n\t\t\tisLogin:propL\n\t\t}));\n\t\t\n\t  }\n\t} \n\t\n    render () {\n      const { component: Component, ...rest } = this.props\n      let isLogin = this.props.loginstatus;\n      //const { isLogin } = this.state\n      console.log(\"call PrivateRoute\")\n      console.log('PrivateRoute isLogin = ',isLogin)\n      return (\n\t\t\n         <Route {...rest} render={props => (\n\t\t\t {this.state.isLogin}\n                ? <Component {...props} />\n                : <Redirect to='/Login' />\n            )} />\n      )\n    }\n  \n  }*/var PrivateRoute=function PrivateRoute(_ref){var Component=_ref.component,rest=_objectWithoutProperties(_ref,[\"component\"]);return React.createElement(Route,Object.assign({},rest,{render:function render(props){return localStorage.getItem('auth')?React.createElement(Component,props):React.createElement(Redirect,{to:{pathname:'/Login',state:{from:props.location}}});}}));};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.handleisLoginChange=function(isLogin){console.log(\"call handleisLoginChange\");console.log(isLogin);_this.setState({isLogin:isLogin});localStorage.setItem('auth',true);if(isLogin)window.location=\"/in\";console.log('App isLogin = ',_this.state.isLogin);};_this.state={isLogin:false};_this.handleisLoginChange=_this.handleisLoginChange.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"container\"},React.createElement(Route,{path:\"/\",exact:true,component:Home_page}),React.createElement(Route,{path:\"/Login\",render:function render(props){return React.createElement(Login,Object.assign({},props,{loginFunc:_this2.handleisLoginChange,loginstatus:_this2.state.isLogin}));}}),React.createElement(Route,{path:\"/Support\",component:Support_page}),React.createElement(Route,{path:\"/About\",component:About_page}),React.createElement(Route,{path:\"/Contact\",component:Contact_page}),React.createElement(Route,{path:\"/Register\",exact:true,component:Register_page}),React.createElement(Route,{path:\"/Register/pages\",component:register_app}),React.createElement(Route,{path:\"/Forget\",component:Forget_page}),React.createElement(PrivateRoute,{path:\"/in\",component:Main_in_page,loginstatus:this.state.isLogin}),React.createElement(Route,{path:\"/Team\",component:Team_page}),React.createElement(Route,{path:\"/History\",component:History_page}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/src/App.js"],"names":["React","Component","Route","Redirect","Home_page","Login_page","Support_page","About_page","Contact_page","Register_page","Forget_page","Team_page","History_page","Home_in_page","Column_page","Recruit_study_page","Main_in_page","register_app","Login","isLoginChecker","Footer","get","equal","PrivateRoute","component","rest","props","localStorage","getItem","pathname","state","from","location","App","handleisLoginChange","isLogin","console","log","setState","setItem","window","bind"],"mappings":"8jCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,CAAgBC,QAAhB,KAAgC,kBAAhC,CACA,OAASC,SAAT,CAAmBC,UAAnB,CAA+BC,YAA/B,CAA4CC,UAA5C,CAAwDC,YAAxD,CAAqEC,aAArE,CAAmFC,WAAnF,CAA+FC,SAA/F,CAAyGC,YAAzG,KAA4H,aAA5H,CACA,OAASC,YAAT,CAAuBC,WAAvB,CAAmCC,kBAAnC,CAAuDC,YAAvD,KAA2E,eAA3E,CACA;AACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAAQC,cAAR,KAA6B,cAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA;AACA,MAAO,WAAP,CACA,OAASC,GAAT,KAAoB,UAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,iBAAlB,CACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA8DA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,UAActB,CAAAA,SAAd,MAAGuB,SAAH,CAA4BC,IAA5B,oDACnB,qBAAC,KAAD,kBAAWA,IAAX,EAAiB,MAAM,CAAE,gBAACC,KAAD,QACvBC,CAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EACI,oBAAC,SAAD,CAAeF,KAAf,CADJ,CAEI,oBAAC,QAAD,EAAU,EAAE,CAAE,CACZG,QAAQ,CAAE,QADE,CAEZC,KAAK,CAAE,CAAEC,IAAI,CAAEL,KAAK,CAACM,QAAd,CAFK,CAAd,EAHmB,EAAzB,GADmB,EAArB,C,GAWMC,CAAAA,G,6DACJ,aAAYP,KAAZ,CAAkB,qCAChB,qEAAMA,KAAN,GADgB,MAOlBQ,mBAPkB,CAOI,SAACC,OAAD,CAAY,CAChCC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EACAD,OAAO,CAACC,GAAR,CAAYF,OAAZ,EACA,MAAKG,QAAL,CAAc,CACZH,OAAO,CAACA,OADI,CAAd,EAGHR,YAAY,CAACY,OAAb,CAAqB,MAArB,CAA4B,IAA5B,EACA,GAAGJ,OAAH,CAAYK,MAAM,CAACR,QAAP,CAAkB,KAAlB,CACTI,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA6B,MAAKP,KAAL,CAAWK,OAAxC,EACD,CAhBiB,CAEhB,MAAKL,KAAL,CAAa,CACXK,OAAO,CAAC,KADG,CAAb,CAGA,MAAKD,mBAAL,CAA2B,MAAKA,mBAAL,CAAyBO,IAAzB,+BAA3B,CALgB,aAMjB,C,uDAWQ,iBACP,MACE,4BAAK,SAAS,CAAC,WAAf,EAGE,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,KAArB,CAAsB,SAAS,CAAErC,SAAjC,EAHF,CAKE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,MAAM,CAAI,gBAACsB,KAAD,QAAS,qBAAC,KAAD,kBAAWA,KAAX,EAAkB,SAAS,CAAE,MAAI,CAACQ,mBAAlC,CAAuD,WAAW,CAAE,MAAI,CAACJ,KAAL,CAAWK,OAA/E,GAAT,EAA/B,EALF,CAME,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAE7B,YAAlC,EANF,CAOE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAEC,UAAhC,EAPF,CAQE,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAEC,YAAlC,EARF,CASE,oBAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,KAAK,KAA7B,CAA8B,SAAS,CAAEC,aAAzC,EATF,CAUE,oBAAC,KAAD,EAAO,IAAI,CAAC,iBAAZ,CAA8B,SAAS,CAAIQ,YAA3C,EAVF,CAWE,oBAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,SAAS,CAAEP,WAAjC,EAXF,CAaE,oBAAC,YAAD,EAAc,IAAI,CAAC,KAAnB,CAAyB,SAAS,CAAEM,YAApC,CAAkD,WAAW,CAAE,KAAKc,KAAL,CAAWK,OAA1E,EAbF,CAcE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAExB,SAA/B,EAdF,CAeE,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAEC,YAAlC,EAfF,CADF,CAmBD,C,iBAtCeX,S,EAyClB,cAAegC,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { Home_page,Login_page, Support_page,About_page ,Contact_page,Register_page,Forget_page,Team_page,History_page} from './out/pages';\nimport { Home_in_page, Column_page,Recruit_study_page, Main_in_page } from './in/pages_in'; \n//import PrivateRoute from './component/PrivateRoute';\nimport register_app from './out/register_in/register_app';\nimport Login from './out/Login';\nimport {isLoginChecker} from './in/isLogin';\nimport Footer from './component/Footer/Footer'\n// import NavBar from './component/AppBar'\nimport './App.css'\nimport { get } from 'mongoose';\nimport equal from 'fast-deep-equal';\n//import {fakeAuth} from './auth';\n/*class PrivateRoute extends Component {\n    constructor (props) {\n      super(props)\n  \n      this.state = {\n        isLogin: false // 是否通過權限檢核\n      }\n  \n    }\n    /*checkAuth = async() => {\n          \n      //console.log(\"isLogin: \"+this.state.isLogin)\n      if(!this.state.isLogin){\n        //setTimeout(alert(\"please wait\"),1000)\n        let isLogin = isLoginChecker()\n        this.setState({\n          isLogin:isLogin\n        })\n        \n      }\n    }\n    componentWillMount(){\n     this.checkAuth()\n    }//\n    UNSAFE_componentWillReceiveProps(){\n      this.setState({\n        isLogin:this.props.loginstatus\n      })\n    }\n\t\n\tcomponentDidUpdate(prevProps) {\n\t  if(!equal(this.props.loginstatus, prevProps.loginstatus))\n\t  {\n\t\tconst propL = this.props.loginstatus;\n\t\tconsole.log('login state change',propL);\n\t\tthis.setState((propL)=>({\n\t\t\tisLogin:propL\n\t\t}));\n\t\t\n\t  }\n\t} \n\t\n    render () {\n      const { component: Component, ...rest } = this.props\n      let isLogin = this.props.loginstatus;\n      //const { isLogin } = this.state\n      console.log(\"call PrivateRoute\")\n      console.log('PrivateRoute isLogin = ',isLogin)\n      return (\n\t\t\n         <Route {...rest} render={props => (\n\t\t\t {this.state.isLogin}\n                ? <Component {...props} />\n                : <Redirect to='/Login' />\n            )} />\n      )\n    }\n  \n  }*/\n  \n\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n  <Route {...rest} render={(props) => (\n    localStorage.getItem('auth')\n      ? <Component {...props} />\n      : <Redirect to={{\n          pathname: '/Login',\n          state: { from: props.location }\n        }} />\n  )} />\n)\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      isLogin:false\n    }\n    this.handleisLoginChange = this.handleisLoginChange.bind(this);\n  }\n  handleisLoginChange = (isLogin) =>{\n    console.log(\"call handleisLoginChange\")\n    console.log(isLogin)\n    this.setState({\n      isLogin:isLogin\n    })\n\tlocalStorage.setItem('auth',true);\n\tif(isLogin) window.location = \"/in\";\n    console.log('App isLogin = ',this.state.isLogin)\n  }\n  render() {\n    return (\n      <div className=\"container\">\n        \n\t\t{/* The corresponding component will show here if the current URL matches the path */}\n        <Route path=\"/\" exact component={Home_page} />\n        {/* <Route path=\"/Login\" component={Login_page} loginFunc={this.handleisLoginChange} /> */}\n        <Route path=\"/Login\" render = {(props)=><Login {...props} loginFunc={this.handleisLoginChange} loginstatus={this.state.isLogin}/>}/>\n        <Route path=\"/Support\" component={Support_page} />\n        <Route path=\"/About\" component={About_page} />\n        <Route path=\"/Contact\" component={Contact_page} />\n        <Route path=\"/Register\" exact component={Register_page} />\n        <Route path=\"/Register/pages\" component = {register_app}/>\n        <Route path=\"/Forget\" component={Forget_page} />\n        {/* <Route path=\"/in\" component={Main_in_page} /> */}\n        <PrivateRoute path=\"/in\" component={Main_in_page} loginstatus={this.state.isLogin}/>\n        <Route path=\"/Team\" component={Team_page}/>\n        <Route path=\"/History\" component={History_page}/>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}