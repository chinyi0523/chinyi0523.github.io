{"ast":null,"code":"import _classCallCheck from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Switch,Redirect,Route,Link}from\"react-router-dom\";import Button from'@material-ui/core/Button';import ReactDOM from\"react-dom\";import'./search.css';import{NavBar_in}from'../component/AppBar_in';import axios from'axios';import{handleInputChange}from\"./searchFunc/handleChange\";var map=[[\"account\",\"account\"],[\"username\",\"username\"],[\"nickname\",\"nickname\"],[\"profile\",\"profile\"],[\"publicEmail\",\"publicEmail\"],[\"office\",\"office\"],[\"homephone\",\"homephone\"],[\"cellphone\",\"cellphone\"],[\"major\",\"education.major\"],[\"double_major\",\"education.double_major\"],[\"minor\",\"education.minor\"],[\"master\",\"education.master\"],[\"doctor\",\"education.doctor\"],[\"Company\",\"Occupation.C\"],[\"Occupation\",\"Occupation.O\"],[\"Position\",\"Occupation.P\"]];var Search=/*#__PURE__*/function(_Component){_inherits(Search,_Component);function Search(props){var _this;_classCallCheck(this,Search);_this=_possibleConstructorReturn(this,_getPrototypeOf(Search).call(this,props));var tmpState={hasChanged:{}};map.forEach(function(arr){tmpState[arr[1]]='';});tmpState[\"select\"]=\"1\";_this.state=tmpState;_this.handleInputChange=handleInputChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.creatTable=_this.creatTable.bind(_assertThisInitialized(_this));return _this;}_createClass(Search,[{key:\"handleSubmit\",value:function handleSubmit(event){event.preventDefault();var r=window.confirm(\"確認搜尋?\");if(r){var searchIndex=parseInt(this.state.select)-1;var toSend={};toSend[map[searchIndex][1]]=this.state.toSend;/*map.forEach(arr=>{\r\n\t\t\t\tif(this.state.hasChanged[arr[1]]){\r\n\t\t\t\t\ttoSend[arr[1]] = this.state[arr[1]]\r\n\t\t\t\t}\r\n\t\t\t})*/console.log('toSend',toSend);axios.post(\"/api/searchVisual\",toSend).then(function(res){if(res.data){if(res.data.message===true){var receive=res.data.data;console.log('獲得'+receive.length+'筆資料');console.log(receive);}else{alert(\"錯誤: \\n\"+res.data.description);}}});}}/*componentDidMount(){\r\n\t\tthis.creatTable();\r\n\t}*/},{key:\"creatTable\",value:function creatTable(){var _this2=this;var ST=document.getElementById(\"Search_table\");map.forEach(function(arr){var new_tr=document.createElement(\"tr\");var new_td1=document.createElement(\"td\");new_td1.innerHTML=arr[0];var new_td2=document.createElement(\"td\");new_td2.setAttribute(\"colSpan\",2);var new_input=document.createElement(\"input\");new_input.setAttribute(\"name\",arr[1]);new_input.setAttribute(\"value\",_this2.state[arr[1]]);new_input.onchange=_this2.handleInputChange;new_td2.appendChild(new_input);new_tr.appendChild(new_td1);new_tr.appendChild(new_td2);ST.appendChild(new_tr);});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{id:\"search_container\"},React.createElement(\"form\",{id:\"search_Form\",onSubmit:this.handleSubmit},React.createElement(\"div\",{id:\"search_div\"},React.createElement(\"span\",{id:\"search_method\"},\"\\u8ACB\\u9078\\u64C7\\u67E5\\u8A62\\u65B9\\u5F0F\\uFF1A\"),React.createElement(\"select\",{id:\"search_cstype\",name:\"select\",onChange:this.handleInputChange},React.createElement(\"option\",{value:\"1\"},\"account\"),React.createElement(\"option\",{value:\"2\"},\"username\"),React.createElement(\"option\",{value:\"3\"},\"nickname\"),React.createElement(\"option\",{value:\"4\"},\"profile\"),React.createElement(\"option\",{value:\"5\"},\"publicEmail\"),React.createElement(\"option\",{value:\"6\"},\"office\"),React.createElement(\"option\",{value:\"7\"},\"homephone\"),React.createElement(\"option\",{value:\"8\"},\"cellphone\"),React.createElement(\"option\",{value:\"9\"},\"major\"),React.createElement(\"option\",{value:\"10\"},\"double_major\"),React.createElement(\"option\",{value:\"11\"},\"minor\"),React.createElement(\"option\",{value:\"12\"},\"master\"),React.createElement(\"option\",{value:\"13\"},\"doctor\"),React.createElement(\"option\",{value:\"14\"},\"Company\")),React.createElement(\"span\",{id:\"search_method\"},\"\\u8F38\\u5165\\u95DC\\u9375\\u5B57\\uFF1A\"),React.createElement(\"input\",{name:\"toSend\",value:this.state.toSend,onChange:this.handleInputChange}),React.createElement(\"input\",{type:\"submit\",value:\"Search\"}))));}}]);return Search;}(Component);export default Search;","map":{"version":3,"sources":["/Users/chinyi0523/Desktop/EESA NTUEE+/NTUEE_Plus_website/client/src/in/search.js"],"names":["React","Component","Switch","Redirect","Route","Link","Button","ReactDOM","NavBar_in","axios","handleInputChange","map","Search","props","tmpState","hasChanged","forEach","arr","state","bind","handleSubmit","creatTable","event","preventDefault","r","window","confirm","searchIndex","parseInt","select","toSend","console","log","post","then","res","data","message","receive","length","alert","description","ST","document","getElementById","new_tr","createElement","new_td1","innerHTML","new_td2","setAttribute","new_input","onchange","appendChild"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Switch,Redirect,Route,Link} from \"react-router-dom\"\r\nimport Button from '@material-ui/core/Button';\r\nimport ReactDOM from \"react-dom\";\r\nimport './search.css';\r\nimport {NavBar_in} from '../component/AppBar_in';\r\nimport axios from 'axios';\r\n\r\nimport {handleInputChange} from \"./searchFunc/handleChange\";\r\n\r\nvar map = [\r\n\t[\"account\",\"account\"],\r\n\t[\"username\",\"username\"],\r\n\t[\"nickname\",\"nickname\"],\r\n\t[\"profile\",\"profile\"],\r\n\t[\"publicEmail\",\"publicEmail\"],\r\n\t[\"office\",\"office\"],\r\n\t[\"homephone\",\"homephone\"],\r\n\t[\"cellphone\",\"cellphone\"],\r\n\t[\"major\",\"education.major\"],\r\n\t[\"double_major\",\"education.double_major\"],\r\n\t[\"minor\",\"education.minor\"],\r\n\t[\"master\",\"education.master\"],\r\n\t[\"doctor\",\"education.doctor\"],\r\n\t[\"Company\",\"Occupation.C\"],\r\n\t[\"Occupation\",\"Occupation.O\"],\r\n\t[\"Position\",\"Occupation.P\"]\r\n];\r\n\r\nclass Search extends Component{\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\tvar tmpState = {hasChanged:{}};\r\n\t\tmap.forEach(arr=>{\r\n\t\t\ttmpState[arr[1]]='';\r\n\t\t});\r\n\t\ttmpState[\"select\"] = \"1\";\r\n\t\tthis.state = tmpState;\r\n\t\tthis.handleInputChange = handleInputChange.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.creatTable = this.creatTable.bind(this);\r\n\t}\r\n\t\r\n\thandleSubmit(event){\r\n\t\tevent.preventDefault();\r\n\t\tvar r = window.confirm(\"確認搜尋?\");\r\n\t\tif(r){\r\n\t\t\tconst searchIndex = parseInt(this.state.select)-1;\r\n\t\t\tvar toSend = {};\r\n\t\t\ttoSend[map[searchIndex][1]]=this.state.toSend;\r\n\t\t\t/*map.forEach(arr=>{\r\n\t\t\t\tif(this.state.hasChanged[arr[1]]){\r\n\t\t\t\t\ttoSend[arr[1]] = this.state[arr[1]]\r\n\t\t\t\t}\r\n\t\t\t})*/\r\n\t\t\tconsole.log('toSend',toSend)\r\n\t\t\taxios.post(\"/api/searchVisual\",\r\n\t\t\t\ttoSend\r\n\t\t\t).then(res=>{\r\n\t\t\t\tif(res.data){\r\n\t\t\t\t\tif(res.data.message===true){\r\n\t\t\t\t\t\tconst receive = res.data.data;\r\n\t\t\t\t\t\tconsole.log('獲得'+receive.length+'筆資料');\r\n\t\t\t\t\t\tconsole.log(receive);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\talert(\"錯誤: \\n\"+res.data.description);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t/*componentDidMount(){\r\n\t\tthis.creatTable();\r\n\t}*/\r\n\tcreatTable(){\r\n\t\tvar ST = document.getElementById(\"Search_table\");\r\n\t\tmap.forEach(arr=>{\r\n\t\t\tvar new_tr = document.createElement(\"tr\");\r\n\t\t\t\r\n\t\t\tvar new_td1 = document.createElement(\"td\");\r\n\t\t\tnew_td1.innerHTML=arr[0];\r\n\t\t\t\r\n\t\t\tvar new_td2 = document.createElement(\"td\");\r\n\t\t\tnew_td2.setAttribute(\"colSpan\",2);\r\n\t\t\tvar new_input = document.createElement(\"input\");\r\n\t\t\tnew_input.setAttribute(\"name\",arr[1]);\r\n\t\t\tnew_input.setAttribute(\"value\",this.state[arr[1]])\r\n\t\t\tnew_input.onchange = this.handleInputChange;\r\n\t\t\tnew_td2.appendChild(new_input)\r\n\t\t\t\r\n\t\t\tnew_tr.appendChild(new_td1)\r\n\t\t\tnew_tr.appendChild(new_td2)\r\n\t\t\t\r\n\t\t\tST.appendChild(new_tr)\r\n\t\t})\r\n\t}\r\n\trender(){\r\n        return (\r\n\t       <div id = \"search_container\">\r\n\t\t\t<form id=\"search_Form\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t<div id = \"search_div\">\r\n\t\t\t\t\t<span id = \"search_method\">請選擇查詢方式：</span>\r\n\t\t\t\t\t<select id=\"search_cstype\" name=\"select\" \r\n\t\t\t\t\t\tonChange={this.handleInputChange}>\r\n\t\t\t\t\t\t<option value=\"1\">account</option>\r\n\t\t\t\t\t\t<option value=\"2\">username</option>\r\n\t\t\t\t\t\t<option value=\"3\">nickname</option>\r\n\t\t\t\t\t\t<option value=\"4\">profile</option>\r\n\t\t\t\t\t\t<option value=\"5\">publicEmail</option>\r\n\t\t\t\t\t\t<option value=\"6\">office</option>\r\n\t\t\t\t\t\t<option value=\"7\">homephone</option>\r\n\t\t\t\t\t\t<option value=\"8\">cellphone</option>\r\n\t\t\t\t\t\t<option value=\"9\">major</option>\r\n\t\t\t\t\t\t<option value=\"10\">double_major</option>\r\n\t\t\t\t\t\t<option value=\"11\">minor</option>\r\n\t\t\t\t\t\t<option value=\"12\">master</option>\r\n\t\t\t\t\t\t<option value=\"13\">doctor</option>\r\n\t\t\t\t\t\t<option value=\"14\">Company</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<span id = \"search_method\">輸入關鍵字：</span> \r\n\t\t\t\t\t<input name=\"toSend\" \r\n\t\t\t\t\t\tvalue={this.state.toSend}\r\n\t\t\t\t\t\tonChange={this.handleInputChange}/>\r\n\t\t\t\t\t<input type=\"submit\" value=\"Search\" />\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}