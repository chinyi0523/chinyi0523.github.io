{"ast":null,"code":"import _classCallCheck from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import FacebookLogin from'react-facebook-login/dist/facebook-login-render-props';import{Link,Redirect}from'react-router-dom';import axios from\"axios\";import Button from'@material-ui/core/Button';import'./Register.css';import Facebook_image from'../images/Register_Facebook.png';import Account_image from'../images/Register_Account.png';//import axios from 'axios';\nimport{NavBar}from'../component/AppBar';var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);function Register(props){var _this;_classCallCheck(this,Register);_this=_possibleConstructorReturn(this,_getPrototypeOf(Register).call(this,props));_this.handleFBSubmit=function(response){if(response.status==\"unknown\"){return;}axios.post(\"/api/loginFB\",{facebookID:response.userID}).then(function(res){console.log(res.data);if(res.data){if(res.data.message===true){alert('Already registered! Welcome：'+res.data.username);_this.setState({Login_facebook_ID:response.userID,isFBLogin:true,isLogin:true});_this.handleLogin(true);}else{_this.setState({Login_facebook_ID:response.userID,isLogin:false,isFBLogin:true});_this.handleLogin(false);}}}).catch(function(err){console.log(err);_this.handleLogin(false);});};_this.state={Login_facebook_ID:'',isLogin:false,isFBLogin:false};_this.handleLogin=_this.handleLogin.bind(_assertThisInitialized(_this));_this.handleFBSubmit=_this.handleFBSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Register,[{key:\"handleLogin\",value:function handleLogin(isLoginorNot){console.log(\"handleLogin\");var isLogin=isLoginorNot;if(isLogin){localStorage.setItem('auth',true);window.location='in';}}},{key:\"render\",value:function render(){console.log(this.state);if(this.state.isLogin){return React.createElement(Redirect,{to:\"/in\"});}else if(this.state.isFBLogin){return React.createElement(Redirect,{to:{pathname:\"/Register/pages/Register_facebook\",id:this.state.Login_facebook_ID}});}return React.createElement(\"div\",null,React.createElement(NavBar,null),React.createElement(\"div\",{id:\"Register_container\"},React.createElement(\"div\",{id:\"Register_text\",style:{marginTop:\"8%\"}},\"Please choose one method to register, strongly recommend via Facebook\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{id:\"Register_imgs\"},React.createElement(Link,{to:\"/Register/pages/Register_account\"},React.createElement(\"img\",{src:Account_image,alt:\"Register by Account\",height:\"480\",width:\"320\"})),React.createElement(FacebookLogin,{appId:\"176796437077702\",autoLoad:false,fields:\"name,email,picture\",callback:this.handleFBSubmit// cssClass=\"RegisterFB_btn\"\n,textButton:\"\",render:function render(renderProps){return React.createElement(\"img\",{id:\"RegisterFB_img\",onClick:renderProps.onClick,src:Facebook_image,alt:\"Register by Facebook\",height:\"480\",width:\"320\"});}})))));}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["/Users/chinyi0523/Desktop/EESA NTUEE+/chinyi0523.github.io/client/src/out/Register.js"],"names":["React","Component","FacebookLogin","Link","Redirect","axios","Button","Facebook_image","Account_image","NavBar","Register","props","handleFBSubmit","response","status","post","facebookID","userID","then","res","console","log","data","message","alert","username","setState","Login_facebook_ID","isFBLogin","isLogin","handleLogin","catch","err","state","bind","isLoginorNot","localStorage","setItem","window","location","pathname","id","marginTop","renderProps","onClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from \"axios\";\nimport Button from '@material-ui/core/Button';\nimport './Register.css';\nimport Facebook_image from '../images/Register_Facebook.png';\nimport Account_image from '../images/Register_Account.png';\n//import axios from 'axios';\nimport { NavBar } from '../component/AppBar';\nclass Register extends Component{\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t  Login_facebook_ID: '',\n\t\t  isLogin: false,\n\t\t  isFBLogin: false\n\t\t};\n\n\t\tthis.handleLogin = this.handleLogin.bind(this);\n\t\tthis.handleFBSubmit = this.handleFBSubmit.bind(this);\n\t}\n\thandleLogin(isLoginorNot){\n\t\tconsole.log(\"handleLogin\");\n\t\tlet isLogin = isLoginorNot;\n\t\tif(isLogin){\n\t\t\tlocalStorage.setItem('auth',true);\n\t\t\twindow.location = 'in';\n\t\t}\n\t}\n\thandleFBSubmit = (response) => {\n\t\tif (response.status == \"unknown\") {\n\t\t\treturn\n\t\t}\n\t\taxios.post(\"/api/loginFB\", {facebookID: response.userID}).then(res => {\n\t\t\tconsole.log(res.data);\n\t\t\tif(res.data){\n\t\t\t\tif(res.data.message===true){\n\t\t\t\t\talert('Already registered! Welcome：'+res.data.username);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tLogin_facebook_ID:response.userID,\n\t\t\t\t\t\tisFBLogin : true,\n\t\t\t\t\t\tisLogin   : true\n\t\t\t\t\t});\n\t\t\t\t\tthis.handleLogin(true)\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tLogin_facebook_ID:response.userID,\n\t\t\t\t\t\tisLogin   : false,\n\t\t\t\t\t\tisFBLogin : true\n\t\t\t\t\t});\n\t\t\t\t\tthis.handleLogin(false)\n\t\t\t\t}\n\t\t\t}\n\t\t}).catch(err => {\n\t\t\tconsole.log(err)\n\t\t\tthis.handleLogin(false)\n\t\t})\n\t}\n    render(){\n\t\tconsole.log (this.state)\n\t\tif(this.state.isLogin){\n\t\t\treturn <Redirect to=\"/in\" />\n\t\t} \n\t\telse if (this.state.isFBLogin) {\n\t\t\treturn <Redirect to={{pathname:\"/Register/pages/Register_facebook\", id:this.state.Login_facebook_ID}} />\n\t\t}\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<NavBar/>\n            \t<div id=\"Register_container\">\n\t\t\t\t\t<div id =\"Register_text\" style={{marginTop:\"8%\"}}>\n\t\t\t\t\t\tPlease choose one method to register, strongly recommend via Facebook<br/><br/><br/>\n\t\t\t\t\t\t<div id=\"Register_imgs\">\n\t\t\t\t\t\t\t{/* <Link to=\"/Register/pages/Register_facebook\" ><img src= {Facebook_image} alt=\"Register by Facebook\" height=\"480\" width=\"320\"/></Link>*/}\n\t\t\t\t\t\t\t<Link to=\"/Register/pages/Register_account\" ><img src= {Account_image} alt=\"Register by Account\" height=\"480\" width=\"320\"/></Link>\t\t\n\t\t\t\t\t\t\t<FacebookLogin\n\t\t\t\t\t\t\t\tappId=\"176796437077702\"\n\t\t\t\t\t\t\t\tautoLoad={false}\n\t\t\t\t\t\t\t\tfields=\"name,email,picture\"\n\t\t\t\t\t\t\t\tcallback={this.handleFBSubmit}\n\t\t\t\t\t\t\t\t// cssClass=\"RegisterFB_btn\"\n\t\t\t\t\t\t\t\ttextButton = \"\"\n\t\t\t\t\t\t\t\trender={renderProps => (\n\t\t\t\t\t\t\t\t\t<img id=\"RegisterFB_img\" onClick={renderProps.onClick} src= {Facebook_image} alt=\"Register by Facebook\" height=\"480\" width=\"320\"/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n        )\n    }\n}\nexport default Register"]},"metadata":{},"sourceType":"module"}